# ===================================
# AWS S3 File Uploader Configuration
# ===================================

# AWS Region (required)
AWS_REGION=eu-west-1

# S3 bucket name (required)
S3_BUCKET_NAME=my-bucket-name

# ===================================
# OIDC Authentication (Kubernetes/EKS)
# ===================================

# IAM role ARN to assume (for Kubernetes/EKS)
# This role must have s3:PutObject permissions on the bucket
# Example: arn:aws:iam::123456789012:role/my-s3-uploader-role
AWS_ROLE_ARN=arn:aws:iam::ACCOUNT_ID:role/ROLE_NAME

# OIDC token path (automatically mounted by Kubernetes)
# Default value: /var/run/secrets/eks.amazonaws.com/serviceaccount/token
AWS_WEB_IDENTITY_TOKEN_FILE=/var/run/secrets/eks.amazonaws.com/serviceaccount/token

# ===================================
# Classic Authentication (fallback)
# ===================================

# If AWS_ROLE_ARN is not defined or the token doesn't exist,
# the application will use these classic credentials

# AWS Access Key ID (for local testing)
# AWS_ACCESS_KEY_ID=AKIAIOSFODNN7EXAMPLE

# AWS Secret Access Key (for local testing)
# AWS_SECRET_ACCESS_KEY=wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY

# ===================================
# Notes
# ===================================

# For production deployment on Qovery/Kubernetes:
# - AWS_ROLE_ARN should be passed as a secret
# - AWS_WEB_IDENTITY_TOKEN_FILE will be mounted automatically
# - Never commit AWS_ACCESS_KEY_ID and AWS_SECRET_ACCESS_KEY

# For local testing:
# - Comment out AWS_ROLE_ARN
# - Define AWS_ACCESS_KEY_ID and AWS_SECRET_ACCESS_KEY
# - Or use aws configure (credentials in ~/.aws/credentials)
